#include <iostream>
#include <stack>
#include <string>

using namespace std;

int main() {
    setlocale(LC_ALL, "Russian");
    cout << "Введите строку: ";
    string s;
    cin >> s;

    // Создаем пустой стек символов
    stack<char> st;
    // Проходим по всем символам строки
    for (char c : s) {
        // Если символ - открывающая скобка, добавляем ее в стек
        if (c == '(' || c == '{' || c == '[') {
            st.push(c);
        }
        // Если символ - закрывающая скобка, проверяем соответствие с последней открывающей скобкой в стеке
        else if (c == ')' || c == '}' || c == ']') {
            // Если стек пустой или последняя открывающая скобка не соответствует закрывающей скобке, выводим сообщение о некорректности строки и завершаем программу
            if (st.empty() || (c == ')' && st.top() != '(') || (c == '}' && st.top() != '{') || (c == ']' && st.top() != '[')) {
                cout << "Строка не существует" << endl;
                return 0;
            }
            // Если последняя открывающая скобка соответствует закрывающей скобке, удаляем ее из стека
            else {
                st.pop();
            }
        }
    }

    // Если стек пустой после проверки всех символов, выводим сообщение о корректности строки
    if (st.empty()) {
        cout << "Строка существует" << endl;
    }
    // Если в стеке остались открывающие скобки, выводим сообщение о некорректности строки
    else {
        cout << "Строка не существует" << endl;
    }

    return 0;
}
